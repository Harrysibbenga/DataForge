<!-- templates/pricing.html -->
{% extends "base.html" %}

{% block title %}DataForge - Pricing{% endblock %}

{% block content %}


<body>

    <section class="py-5 bg-light">
        <div class="container">
            <div class="text-center mb-5">
                <h1 class="display-4 fw-bold">Choose Your Plan</h1>
                <p class="lead text-muted">Select the plan that best fits your data conversion needs</p>
            </div>

            <div class="row g-4 justify-content-center">
                <!-- Free Plan -->
                <div class="col-md-6 col-lg-3">
                    <div class="card h-100 shadow-sm">
                        <div class="card-header bg-white text-center py-4">
                            <h3 class="my-0 fw-normal">Free</h3>
                        </div>
                        <div class="card-body d-flex flex-column">
                            <h1 class="card-title text-center mb-4">$0<small class="text-muted fw-light">/mo</small>
                            </h1>
                            <ul class="list-unstyled mt-3 mb-4">
                                <li class="mb-2"><i class="bi bi-check-circle-fill text-success me-2"></i>5 conversions
                                    per day</li>
                                <li class="mb-2"><i class="bi bi-check-circle-fill text-success me-2"></i>5MB file size
                                    limit</li>
                                <li class="mb-2"><i class="bi bi-check-circle-fill text-success me-2"></i>Basic
                                    transformations</li>
                                <li class="mb-2"><i class="bi bi-x-circle-fill text-danger me-2"></i>No API access</li>
                                <li class="mb-2"><i class="bi bi-x-circle-fill text-danger me-2"></i>No priority support
                                </li>
                            </ul>
                            <div class="mt-auto">
                                <button type="button" class="w-100 btn btn-lg btn-outline-primary" id="freePlanBtn">
                                    Current Plan
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Basic Plan -->
                <div class="col-md-6 col-lg-3">
                    <div class="card h-100 shadow">
                        <div class="card-header bg-primary text-white text-center py-4">
                            <h3 class="my-0 fw-normal">Basic</h3>
                        </div>
                        <div class="card-body d-flex flex-column">
                            <h1 class="card-title text-center mb-4">$9.99<small class="text-muted fw-light">/mo</small>
                            </h1>
                            <ul class="list-unstyled mt-3 mb-4">
                                <li class="mb-2"><i class="bi bi-check-circle-fill text-success me-2"></i>100
                                    conversions per month</li>
                                <li class="mb-2"><i class="bi bi-check-circle-fill text-success me-2"></i>50MB file size
                                    limit</li>
                                <li class="mb-2"><i class="bi bi-check-circle-fill text-success me-2"></i>All
                                    transformations</li>
                                <li class="mb-2"><i class="bi bi-check-circle-fill text-success me-2"></i>API access
                                </li>
                                <li class="mb-2"><i class="bi bi-check-circle-fill text-success me-2"></i>Email support
                                </li>
                            </ul>
                            <div class="mt-auto">
                                <button type="button" class="w-100 btn btn-lg btn-primary" data-plan="basic"
                                    id="basicPlanBtn">
                                    Get Started
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Pro Plan -->
                <div class="col-md-6 col-lg-3">
                    <div class="card h-100 shadow-lg border-primary">
                        <div class="card-header bg-primary text-white text-center py-4">
                            <span
                                class="badge bg-warning text-dark position-absolute top-0 start-50 translate-middle">Most
                                Popular</span>
                            <h3 class="my-0 fw-normal">Pro</h3>
                        </div>
                        <div class="card-body d-flex flex-column">
                            <h1 class="card-title text-center mb-4">$24.99<small class="text-muted fw-light">/mo</small>
                            </h1>
                            <ul class="list-unstyled mt-3 mb-4">
                                <li class="mb-2"><i class="bi bi-check-circle-fill text-success me-2"></i>500
                                    conversions per month</li>
                                <li class="mb-2"><i class="bi bi-check-circle-fill text-success me-2"></i>100MB file
                                    size limit</li>
                                <li class="mb-2"><i class="bi bi-check-circle-fill text-success me-2"></i>All
                                    transformations</li>
                                <li class="mb-2"><i class="bi bi-check-circle-fill text-success me-2"></i>Advanced API
                                    access</li>
                                <li class="mb-2"><i class="bi bi-check-circle-fill text-success me-2"></i>Priority
                                    support</li>
                            </ul>
                            <div class="mt-auto">
                                <button type="button" class="w-100 btn btn-lg btn-primary" data-plan="pro"
                                    id="proPlanBtn">
                                    Get Started
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Enterprise Plan -->
                <div class="col-md-6 col-lg-3">
                    <div class="card h-100 shadow">
                        <div class="card-header bg-dark text-white text-center py-4">
                            <h3 class="my-0 fw-normal">Enterprise</h3>
                        </div>
                        <div class="card-body d-flex flex-column">
                            <h1 class="card-title text-center mb-4">$99.99<small class="text-muted fw-light">/mo</small>
                            </h1>
                            <ul class="list-unstyled mt-3 mb-4">
                                <li class="mb-2"><i class="bi bi-check-circle-fill text-success me-2"></i>Unlimited
                                    conversions</li>
                                <li class="mb-2"><i class="bi bi-check-circle-fill text-success me-2"></i>500MB file
                                    size limit</li>
                                <li class="mb-2"><i class="bi bi-check-circle-fill text-success me-2"></i>Custom
                                    transformations</li>
                                <li class="mb-2"><i class="bi bi-check-circle-fill text-success me-2"></i>Full API
                                    access</li>
                                <li class="mb-2"><i class="bi bi-check-circle-fill text-success me-2"></i>Dedicated
                                    support</li>
                            </ul>
                            <div class="mt-auto">
                                <button type="button" class="w-100 btn btn-lg btn-dark" data-plan="enterprise"
                                    id="enterprisePlanBtn">
                                    Get Started
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="py-5">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-md-8">
                    <div class="text-center mb-5">
                        <h2 class="fw-bold">Frequently Asked Questions</h2>
                    </div>

                    <div class="accordion" id="faqAccordion">
                        <div class="accordion-item">
                            <h2 class="accordion-header">
                                <button class="accordion-button" type="button" data-bs-toggle="collapse"
                                    data-bs-target="#faq1">
                                    Can I upgrade or downgrade my plan later?
                                </button>
                            </h2>
                            <div id="faq1" class="accordion-collapse collapse show" data-bs-parent="#faqAccordion">
                                <div class="accordion-body">
                                    Yes! You can upgrade or downgrade your plan at any time. If you upgrade, the new
                                    plan will take effect immediately. If you downgrade, the change will take effect at
                                    the end of your current billing cycle.
                                </div>
                            </div>
                        </div>

                        <div class="accordion-item">
                            <h2 class="accordion-header">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                                    data-bs-target="#faq2">
                                    What payment methods do you accept?
                                </button>
                            </h2>
                            <div id="faq2" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                                <div class="accordion-body">
                                    We accept all major credit cards (Visa, Mastercard, American Express, Discover)
                                    through our secure payment processor, Stripe.
                                </div>
                            </div>
                        </div>

                        <div class="accordion-item">
                            <h2 class="accordion-header">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                                    data-bs-target="#faq3">
                                    Is there a contract or commitment?
                                </button>
                            </h2>
                            <div id="faq3" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                                <div class="accordion-body">
                                    No long-term contracts! All plans are billed monthly and you can cancel at any time.
                                    If you cancel, you'll maintain access until the end of your current billing cycle.
                                </div>
                            </div>
                        </div>

                        <div class="accordion-item">
                            <h2 class="accordion-header">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                                    data-bs-target="#faq4">
                                    Do you offer a free trial?
                                </button>
                            </h2>
                            <div id="faq4" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                                <div class="accordion-body">
                                    Instead of a free trial, we offer a free plan with limited features. This allows you
                                    to try the core functionality of DataForge before committing to a paid plan.
                                </div>
                            </div>
                        </div>

                        <div class="accordion-item">
                            <h2 class="accordion-header">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                                    data-bs-target="#faq5">
                                    What happens if I reach my conversion limit?
                                </button>
                            </h2>
                            <div id="faq5" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                                <div class="accordion-body">
                                    If you reach your monthly conversion limit, you can either wait until your limit
                                    resets in the next billing cycle or upgrade to a higher plan for more conversions
                                    immediately.
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="py-5 bg-primary text-white">
        <div class="container text-center">
            <h2 class="fw-bold mb-4">Need a custom solution?</h2>
            <p class="lead mb-4">Contact us to discuss custom enterprise options for your organization.</p>
            <a href="/contact" class="btn btn-lg btn-light">Contact Sales</a>
        </div>
    </section>

    <script>
        document.addEventListener('DOMContentLoaded', function () {

            // Handle plan button clicks
            const planButtons = document.querySelectorAll('[data-plan]');
            planButtons.forEach(button => {
                button.addEventListener('click', function () {
                    const plan = this.getAttribute('data-plan');

                    if (!token) {
                        // Redirect to login if not authenticated
                        window.location.href = `/login?redirect=pricing&plan=${plan}`;
                        return;
                    }

                    // Create checkout session
                    fetch('/api/payment/create-checkout', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            'Authorization': `Bearer ${token}`
                        },
                        body: JSON.stringify({ tier: plan })
                    })
                        .then(response => response.json())
                        .then(data => {
                            // Redirect to Stripe checkout
                            window.location.href = data.checkout_url;
                        })
                        .catch(error => {
                            console.error('Error:', error);
                            alert('An error occurred. Please try again.');
                        });
                });
            });

        });
    </script>
</body>

<!-- Your existing content here -->
{% endblock %}